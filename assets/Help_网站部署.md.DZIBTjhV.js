import{_ as s,c as i,o as a,a4 as n}from"./chunks/framework.Dp2ecPID.js";const g=JSON.parse('{"title":"网站部署","description":"","frontmatter":{},"headers":[],"relativePath":"Help/网站部署.md","filePath":"Help/网站部署.md"}'),e={name:"Help/网站部署.md"},l=n(`<h1 id="网站部署" tabindex="-1">网站部署 <a class="header-anchor" href="#网站部署" aria-label="Permalink to &quot;网站部署&quot;">​</a></h1><h4 id="up-az-channel" tabindex="-1"><a href="https://www.bilibili.com/video/BV1XW4y1w7bc/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9f16feb6ff7836e90c4ba95657422ea" target="_blank" rel="noreferrer">up:AZ_Channel</a> <a class="header-anchor" href="#up-az-channel" aria-label="Permalink to &quot;[up:AZ_Channel](https://www.bilibili.com/video/BV1XW4y1w7bc/?spm_id_from=333.337.search-card.all.click&amp;vd_source=b9f16feb6ff7836e90c4ba95657422ea)&quot;">​</a></h4><h4 id="作品" tabindex="-1"><a href="https://docs.bugdesigner.cn/" target="_blank" rel="noreferrer">作品</a> <a class="header-anchor" href="#作品" aria-label="Permalink to &quot;[作品](https://docs.bugdesigner.cn/)&quot;">​</a></h4><h4 id="up-正心全栈编程" tabindex="-1"><a href="https://www.bilibili.com/video/BV1Wu4y177bB/?spm_id_from=333.788&amp;vd_source=b9f16feb6ff7836e90c4ba95657422ea" target="_blank" rel="noreferrer">up:正心全栈编程</a> <a class="header-anchor" href="#up-正心全栈编程" aria-label="Permalink to &quot;[up:正心全栈编程](https://www.bilibili.com/video/BV1Wu4y177bB/?spm_id_from=333.788&amp;vd_source=b9f16feb6ff7836e90c4ba95657422ea)&quot;">​</a></h4><h4 id="作品-1" tabindex="-1"><a href="https://docs.zhengxinonly.com/" target="_blank" rel="noreferrer">作品</a> <a class="header-anchor" href="#作品-1" aria-label="Permalink to &quot;[作品](https://docs.zhengxinonly.com/)&quot;">​</a></h4><h4 id="vitepress部署" tabindex="-1"><a href="https://docs.bugdesigner.cn/docs/Tutorial/vitepress.html#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4" target="_blank" rel="noreferrer">vitepress部署 </a> <a class="header-anchor" href="#vitepress部署" aria-label="Permalink to &quot;[vitepress部署 ](https://docs.bugdesigner.cn/docs/Tutorial/vitepress.html#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4)&quot;">​</a></h4><p>使用版本</p><p><code>npm --version</code></p><p><code>10.5.0</code></p><p><code>node --version</code></p><p><code>v20.12.2</code></p><p><a href="https://vitepress.dev/guide/getting-started" target="_blank" rel="noreferrer">vitepress官网</a></p><p>可以选择不同的包管理工具（npm和pnpm都是Node.js的包管理器）由于我使用的npm，因此deploy.yml参考的 <a href="https://helloahao096.github.io/helloahao/posts/GitHub%20Action%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.html" target="_blank" rel="noreferrer">部署博客</a></p><p>首先在Settings-Pages-Branch-Select branch选中gh-pages，设置分支，然后new workflow（新建工作流）创建文件deploy.yml然后commit，个人理解这个就是在Github上执行运行项目的命令，不过有几处需要改动一下</p><ol><li>文件中3处@v3被我修改为@v4</li><li>node-version改为20</li><li>publish_dir修改路径删除了博客中的docs/</li></ol><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .github &gt; workflows &gt; deploy.yml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">   push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">master</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">   deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              fetch-depth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm install --frozen-lockfile</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm run docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 将构建产物 commit 到一个分支上，用于发布静态站点资源</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # https://github.com/peaceiris/actions-gh-pages</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            #不要将peaceiris改为自己的仓库名，我单纯的以为这个需要改成自己的仓库名，部署上去就build失败了，需引用该仓库的配置</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">peaceiris/actions-gh-pages@v4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Github 会在 workflow 中自动生成 GIHUBT_TOKEN，用于认证 workflow 的运行</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              github_token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # 静态资源目录设置，如果你没有在.vitepress前面额外建立一个文件夹的话</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              publish_dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.vitepress/dist</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # 默认发布到 gh-pages 分支上，可以指定特定的发布分支（不能选拉取代码的分支）</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              publish_branch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gh-pages</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              full_commit_message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ github.event.head_commit.message }}</span></span></code></pre></div>`,16),h=[l];function p(t,k,r,E,d,c){return a(),i("div",null,h)}const y=s(e,[["render",p]]);export{g as __pageData,y as default};
